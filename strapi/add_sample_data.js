/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Strapi
 * –ó–∞–ø—É—Å–∫: node add_sample_data.js
 */

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π fetch (Node.js 18+) –∏–ª–∏ require –¥–ª—è –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
let fetch;
try {
  fetch = globalThis.fetch;
} catch (e) {
  // –î–ª—è Node.js < 18
  const { default: fetchDefault } = require('node-fetch');
  fetch = fetchDefault;
}

const BASE_URL = 'http://localhost:1337';

// –î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
const areas = [
  {
    name: '–ü—Ä–∏—ç–ª—å–±—Ä—É—Å—å–µ',
    description: '–†–∞–π–æ–Ω –≤–æ–∫—Ä—É–≥ –≥–æ—Ä—ã –≠–ª—å–±—Ä—É—Å'
  },
  {
    name: '–î–æ–º–±–∞–π',
    description: '–î–æ–º–±–∞–π—Å–∫–∏–π —Ä–∞–π–æ–Ω'
  },
  {
    name: '–ê—Ä—Ö—ã–∑',
    description: '–ê—Ä—Ö—ã–∑—Å–∫–∏–π —Ä–∞–π–æ–Ω'
  },
  {
    name: '–ß–µ–≥–µ–º—Å–∫–æ–µ —É—â–µ–ª—å–µ',
    description: '–ß–µ–≥–µ–º—Å–∫–æ–µ —É—â–µ–ª—å–µ'
  }
];

const categories = [
  {
    name: '–î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
    description: '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –¥–ª—è –ø–æ—Å–µ—â–µ–Ω–∏—è'
  },
  {
    name: '–ü—Ä–∏—Ä–æ–¥–∞',
    description: '–ü—Ä–∏—Ä–æ–¥–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã'
  },
  {
    name: '–ö—É–ª—å—Ç—É—Ä–∞',
    description: '–ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã'
  },
  {
    name: '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
    description: '–ú–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π'
  }
];

const types = [
  {
    name: '–ü–µ—à–∏–π –ø–æ—Ö–æ–¥',
    entity_type: 'route',
    description: '–ü–µ—à–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ –≥–æ—Ä–∞–º –∏ –ª–µ—Å–∞–º'
  },
  {
    name: '–í–µ–ª–æ–º–∞—Ä—à—Ä—É—Ç',
    entity_type: 'route',
    description: '–í–µ–ª–æ—Å–∏–ø–µ–¥–Ω—ã–µ —Ç—Ä–∞—Å—Å—ã'
  },
  {
    name: '–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π',
    entity_type: 'route',
    description: '–ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫'
  }
];

const places = [
  {
    name: '–ü–∞—Ä–∫ –ê—Ç–∞–∂—É–∫–∏–Ω—Å–∫–∏–π',
    type: '–ø–∞—Ä–∫',
    description: '–ö—Ä—É–ø–Ω–µ–π—à–∏–π –ø–∞—Ä–∫ –Ω–∞ –°–µ–≤–µ—Ä–Ω–æ–º –ö–∞–≤–∫–∞–∑–µ —Å –±–æ–≥–∞—Ç–æ–π —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é',
    overview: '–ü–ª–æ—â–∞–¥—å 250 –≥–µ–∫—Ç–∞—Ä–æ–≤, –∞–ª–ª–µ–∏, —Ñ–æ–Ω—Ç–∞–Ω—ã, –æ–∑–µ—Ä–∞, –∑–æ–æ–ø–∞—Ä–∫ –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
    history: '–ó–∞–ª–æ–∂–µ–Ω –≤ 1847 –≥–æ–¥—É –∫–∞–∫ –ö–∞–∑–µ–Ω–Ω—ã–π —Å–∞–¥, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–∏–ª –≤ 1920 –≥–æ–¥—É',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, —É–ª. –¢–æ–ª—Å—Ç–æ–≥–æ, 2',
    hours: '06:00-24:00',
    weekend: '–ë–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    entry: '–°–≤–æ–±–æ–¥–Ω—ã–π',
    contacts: '+78662225566',
    contacts_email: 'park@nalchik.ru',
    latitude: 43.4925,
    longitude: 43.6123,
    rating: 4.8,
    area_id: 1,
    is_active: true
  },
  {
    name: '–ö–∞—Ñ–µ "–ì–æ—Ä–Ω—ã–π –í–µ—Ç–µ—Ä–æ–∫"',
    type: '–∫–∞—Ñ–µ',
    description: '–£—é—Ç–Ω–æ–µ –∫–∞—Ñ–µ —Å –∫–∞–≤–∫–∞–∑—Å–∫–æ–π –∫—É—Ö–Ω–µ–π –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º –≤–∏–¥–æ–º',
    overview: '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –±–ª—é–¥–∞ –∫–∞–≤–∫–∞–∑—Å–∫–æ–π –∫—É—Ö–Ω–∏, —Å–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞, –∫–æ—Ñ–µ –ø–æ-–≤–æ—Å—Ç–æ—á–Ω–æ–º—É',
    history: '–û—Å–Ω–æ–≤–∞–Ω–æ –≤ 1995 –≥–æ–¥—É, —Å —Ç–µ—Ö –ø–æ—Ä —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –ª—é–±–∏–º—ã—Ö –º–µ—Å—Ç –∂–∏—Ç–µ–ª–µ–π –∏ –≥–æ—Å—Ç–µ–π –≥–æ—Ä–æ–¥–∞',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø—Ä. –õ–µ–Ω–∏–Ω–∞, 25',
    hours: '08:00-23:00',
    weekend: '–ë–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    entry: '–°–≤–æ–±–æ–¥–Ω—ã–π',
    contacts: '+78662223344',
    contacts_email: 'gorniy-veterok@mail.ru',
    latitude: 43.4981,
    longitude: 43.7189,
    rating: 4.5,
    area_id: 1,
    is_active: true
  },
  {
    name: '–ú—É–∑–µ–π –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä–∏–∏',
    type: '–º—É–∑–µ–π',
    description: '–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º—É–∑–µ–π —Å –±–æ–≥–∞—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –∏ –∫—É–ª—å—Ç—É—Ä—ã –Ω–∞—Ä–æ–¥–æ–≤ –ö–ë–†',
    overview: '–≠–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –ø–æ –∞—Ä—Ö–µ–æ–ª–æ–≥–∏–∏, —ç—Ç–Ω–æ–≥—Ä–∞—Ñ–∏–∏, –∏—Å–∫—É—Å—Å—Ç–≤—É –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏',
    history: '–û—Å–Ω–æ–≤–∞–Ω –≤ 1921 –≥–æ–¥—É, –≤ —Ñ–æ–Ω–¥–∞—Ö –±–æ–ª–µ–µ 150 —Ç—ã—Å—è—á —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, —É–ª. –ì–æ—Ä—å–∫–æ–≥–æ, 62',
    hours: '10:00-18:00',
    weekend: '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
    entry: '–ü–ª–∞—Ç–Ω—ã–π',
    contacts: '+78662227788',
    contacts_email: 'museum@kbr.ru',
    latitude: 43.5050,
    longitude: 43.6250,
    rating: 4.2,
    area_id: 1,
    is_active: true
  },
  {
    name: '–†–µ—Å—Ç–æ—Ä–∞–Ω "–≠–ª—å–±—Ä—É—Å"',
    type: '—Ä–µ—Å—Ç–æ—Ä–∞–Ω',
    description: '–†–µ—Å—Ç–æ—Ä–∞–Ω –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫—É—Ö–Ω–∏ —Å –∫–∞–≤–∫–∞–∑—Å–∫–∏–º –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–æ–º',
    overview: '–ë–ª—é–¥–∞ –∫–∞–±–∞—Ä–¥–∏–Ω—Å–∫–æ–π, –±–∞–ª–∫–∞—Ä—Å–∫–æ–π –∏ –æ–±—â–µ–∫–∞–≤–∫–∞–∑—Å–∫–æ–π –∫—É—Ö–Ω–∏, –∂–∏–≤–∞—è –º—É–∑—ã–∫–∞',
    history: '–†–∞–±–æ—Ç–∞–µ—Ç —Å 1985 –≥–æ–¥–∞, –∏–∑–≤–µ—Å—Ç–µ–Ω —Å–≤–æ–∏–º–∏ —à–µ—Ñ-–ø–æ–≤–∞—Ä–∞–º–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, —É–ª. –ö–∞–±–∞—Ä–¥–∏–Ω—Å–∫–∞—è, 45',
    hours: '11:00-02:00',
    weekend: '–ë–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    entry: '–°–≤–æ–±–æ–¥–Ω—ã–π',
    contacts: '+78662229900',
    contacts_email: 'elbrus-rest@yandex.ru',
    latitude: 43.4900,
    longitude: 43.6300,
    rating: 3.9,
    area_id: 1,
    is_active: true
  },
  {
    name: '–°–∫–≤–µ—Ä "–î—Ä—É–∂–±—ã"',
    type: '–ø–∞—Ä–∫',
    description: '–£—é—Ç–Ω—ã–π —Å–∫–≤–µ—Ä –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫ –∏ –æ—Ç–¥—ã—Ö–∞',
    overview: '–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è —Å —Ñ–æ–Ω—Ç–∞–Ω–æ–º, —Å–∫–∞–º–µ–π–∫–∞–º–∏ –∏ –¥–µ—Ç—Å–∫–æ–π –ø–ª–æ—â–∞–¥–∫–æ–π',
    history: '–°–æ–∑–¥–∞–Ω –≤ 1970-—Ö –≥–æ–¥–∞—Ö –≤ —á–µ—Å—Ç—å –¥—Ä—É–∂–±—ã –Ω–∞—Ä–æ–¥–æ–≤ –ö–∞–≤–∫–∞–∑–∞',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø–ª. –°–æ–≥–ª–∞—Å–∏—è',
    hours: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
    weekend: '–ë–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    entry: '–°–≤–æ–±–æ–¥–Ω—ã–π',
    contacts: '',
    contacts_email: '',
    latitude: 43.5100,
    longitude: 43.6100,
    rating: 4.0,
    area_id: 1,
    is_active: true
  }
];

const routes = [
  {
    name: '–í–æ—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –Ω–∞ –≠–ª—å–±—Ä—É—Å',
    description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –∫ –≤—ã—Å–æ—á–∞–π—à–µ–π —Ç–æ—á–∫–µ –ï–≤—Ä–æ–ø—ã —á–µ—Ä–µ–∑ –∂–∏–≤–æ–ø–∏—Å–Ω—ã–µ –ª–µ–¥–Ω–∏–∫–∏ –∏ –≥–æ—Ä–Ω—ã–µ –ø–µ—Ä–µ–≤–∞–ª—ã',
    overview: '–ú–∞—Ä—à—Ä—É—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ—Ç –ø–æ—Å–µ–ª–∫–∞ –¢–µ—Ä—Å–∫–æ–ª –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø—Ä–∏—é—Ç –ë–æ—á–∫–∏, —Å–∫–∞–ª—ã –ü–∞—Å—Ç—É—Ö–æ–≤–∞ –¥–æ –∑–∞–ø–∞–¥–Ω–æ–π –≤–µ—Ä—à–∏–Ω—ã –≠–ª—å–±—Ä—É—Å–∞',
    history: '–ü–µ—Ä–≤–æ–µ —É—Å–ø–µ—à–Ω–æ–µ –≤–æ—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –Ω–∞ –≠–ª—å–±—Ä—É—Å –±—ã–ª–æ —Å–æ–≤–µ—Ä—à–µ–Ω–æ –≤ 1829 –≥–æ–¥—É —ç–∫—Å–ø–µ–¥–∏—Ü–∏–µ–π –†–æ—Å—Å–∏–π—Å–∫–æ–π –∞–∫–∞–¥–µ–º–∏–∏ –Ω–∞—É–∫ –ø–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –≥–µ–Ω–µ—Ä–∞–ª–∞ –ì. –ê. –≠–º–º–∞–Ω—É—ç–ª—è',
    distance: 22.5,
    duration: 48.0,
    type_id: 1,
    area_id: 1,
    rating: 4.9,
    is_active: true
  },
  {
    name: '–ß–µ–≥–µ–º—Å–∫–∏–µ –≤–æ–¥–æ–ø–∞–¥—ã',
    description: '–ü—É—Ç—å –∫ –≤–µ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–æ–¥–æ–ø–∞–¥–∞–º –≤ –∂–∏–≤–æ–ø–∏—Å–Ω–æ–º –ß–µ–≥–µ–º—Å–∫–æ–º —É—â–µ–ª—å–µ, –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É —Å–≤–æ–∏–º–∏ —Å—É—Ä–æ–≤—ã–º–∏ —Å–∫–∞–ª–∞–º–∏ –∏ –±—É—Ä–Ω–æ–π —Ä–µ–∫–æ–π',
    overview: '–ú–∞—Ä—à—Ä—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–¥–æ–ª—å —Ä–µ–∫–∏ –ß–µ–≥–µ–º —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Å–∫–∞–¥–æ–≤ –≤–æ–¥–æ–ø–∞–¥–æ–≤, —Å–∞–º—ã–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö - –î–µ–≤–∏—á—å–∏ –∫–æ—Å—ã',
    history: '–ß–µ–≥–µ–º—Å–∫–æ–µ —É—â–µ–ª—å–µ –∏–∑–¥–∞–≤–Ω–∞ –±—ã–ª–æ –∑–∞—Å–µ–ª–µ–Ω–æ –±–∞–ª–∫–∞—Ä—Ü–∞–º–∏, –æ —á–µ–º —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É—é—Ç –¥—Ä–µ–≤–Ω–∏–µ —Å–∫–ª–µ–ø—ã –∏ –±–∞—à–Ω–∏',
    distance: 8.2,
    duration: 4.5,
    type_id: 1,
    area_id: 4,
    rating: 4.7,
    is_active: true
  }
];

async function addData() {
  console.log('üöÄ –ù–∞—á–∏–Ω–∞—é –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Strapi...\n');

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏
  async function createEntry(contentType, data, token = null) {
    const headers = {
      'Content-Type': 'application/json'
    };
    
    if (token) {
      headers['Authorization'] = `Bearer ${token}`;
    }

    try {
      const response = await fetch(`${BASE_URL}/api/${contentType}`, {
        method: 'POST',
        headers: headers,
        body: JSON.stringify({ data: { ...data, publishedAt: new Date().toISOString() } })
      });

      if (response.ok) {
        const result = await response.json();
        console.log(`‚úÖ ${contentType}: ${data.name || data.title || '–∑–∞–ø–∏—Å—å'} —Å–æ–∑–¥–∞–Ω–∞`);
        return result.data;
      } else {
        const error = await response.text();
        console.log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ ${contentType}: ${response.status} - ${error}`);
        return null;
      }
    } catch (error) {
      console.log(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      return null;
    }
  }

  // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–π–æ–Ω—ã
  console.log('üìç –î–æ–±–∞–≤–ª—è—é —Ä–∞–π–æ–Ω—ã...');
  const createdAreas = [];
  for (const area of areas) {
    const result = await createEntry('areas', area);
    if (result) createdAreas.push(result);
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  console.log('\nüìÇ –î–æ–±–∞–≤–ª—è—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...');
  for (const category of categories) {
    await createEntry('categories', category);
  }

  // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø—ã
  console.log('\nüè∑Ô∏è –î–æ–±–∞–≤–ª—è—é —Ç–∏–ø—ã...');
  for (const type of types) {
    await createEntry('types', type);
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Å—Ç–∞
  console.log('\nüìç –î–æ–±–∞–≤–ª—è—é –º–µ—Å—Ç–∞...');
  for (const place of places) {
    await createEntry('places', place);
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç—ã
  console.log('\nüó∫Ô∏è –î–æ–±–∞–≤–ª—è—é –º–∞—Ä—à—Ä—É—Ç—ã...');
  for (const route of routes) {
    await createEntry('routes', route);
  }

  console.log('\n‚úÖ –ì–æ—Ç–æ–≤–æ! –î–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Strapi.');
  console.log('\nüìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏: http://localhost:1337/admin');
  console.log('üì° –ò–ª–∏ —á–µ—Ä–µ–∑ API: http://localhost:1337/api/places');
}

// –ó–∞–ø—É—Å–∫–∞–µ–º
addData().catch(console.error);

