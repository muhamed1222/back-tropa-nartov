/**
 * –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –ù–∞–ª—å—á–∏–∫–∞ –≤ Strapi
 * 
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
 * node scripts/add-nalchik-places.js
 */

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å fetch –∏–ª–∏ axios
let axios;
try {
  axios = require('axios');
} catch (error) {
  console.log('–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º axios...');
  console.log('–ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm install axios');
  process.exit(1);
}

const STRAPI_URL = 'http://localhost:1337';
const API_URL = `${STRAPI_URL}/api`;

// –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
const colors = {
  reset: '\x1b[0m',
  green: '\x1b[32m',
  red: '\x1b[31m',
  yellow: '\x1b[33m',
  blue: '\x1b[34m',
};

// –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ù–∞–ª—å—á–∏–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
const places = [
  {
    name: '–ö—É—Ä–æ—Ä—Ç–Ω—ã–π –ø–∞—Ä–∫ "–î–æ–ª–∏–Ω–∞ –Ω–∞—Ä–∑–∞–Ω–æ–≤"',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ö—É—Ä–æ—Ä—Ç–Ω—ã–π –ø–∞—Ä–∫',
    working_hours: '06:00-22:00, –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    phone: '+7 (8662) 77-20-20',
    website: 'https://nalchik-kurort.ru',
    latitude: 43.4850,
    longitude: 43.6150,
    history: '<p>–ö—É—Ä–æ—Ä—Ç–Ω—ã–π –ø–∞—Ä–∫ "–î–æ–ª–∏–Ω–∞ –Ω–∞—Ä–∑–∞–Ω–æ–≤" ‚Äî –æ–¥–∏–Ω –∏–∑ —Å—Ç–∞—Ä–µ–π—à–∏—Ö –∫—É—Ä–æ—Ä—Ç–Ω—ã—Ö –ø–∞—Ä–∫–æ–≤ –†–æ—Å—Å–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –≤ 1847 –≥–æ–¥—É. –ü–∞—Ä–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ —Ü–µ–Ω—Ç—Ä–µ –ù–∞–ª—å—á–∏–∫–∞ –∏ —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–π —Ä–µ–∫—Ä–µ–∞—Ü–∏–æ–Ω–Ω–æ–π –∑–æ–Ω–æ–π –≥–æ—Ä–æ–¥–∞. –ù–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ø–∞—Ä–∫–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –º–∏–Ω–µ—Ä–∞–ª—å–Ω–æ–π –≤–æ–¥—ã "–ù–∞—Ä–∑–∞–Ω", –∫–∞–Ω–∞—Ç–Ω–∞—è –¥–æ—Ä–æ–≥–∞, –∞–ª–ª–µ–∏ –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫, –∞—Ç—Ç—Ä–∞–∫—Ü–∏–æ–Ω—ã –∏ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è. –ü–∞—Ä–∫ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–ª–æ—â–∞–¥—å –±–æ–ª–µ–µ 250 –≥–µ–∫—Ç–∞—Ä–æ–≤ –∏ —è–≤–ª—è–µ—Ç—Å—è –∏–∑–ª—é–±–ª–µ–Ω–Ω—ã–º –º–µ—Å—Ç–æ–º –æ—Ç–¥—ã—Ö–∞ –∫–∞–∫ –∂–∏—Ç–µ–ª–µ–π –≥–æ—Ä–æ–¥–∞, —Ç–∞–∫ –∏ —Ç—É—Ä–∏—Å—Ç–æ–≤.</p>',
    is_active: true,
    rating: 4.5,
  },
  {
    name: '–ê—Ç–∞–∂—É–∫–∏–Ω—Å–∫–∏–π —Å–∞–¥',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, —É–ª. –¢–æ–ª—Å—Ç–æ–≥–æ',
    working_hours: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
    phone: null,
    website: null,
    latitude: 43.4925,
    longitude: 43.6123,
    history: '<p>–ê—Ç–∞–∂—É–∫–∏–Ω—Å–∫–∏–π —Å–∞–¥ ‚Äî —Å—Ç–∞—Ä–µ–π—à–∏–π –ø–∞—Ä–∫ –ù–∞–ª—å—á–∏–∫–∞, –∑–∞–ª–æ–∂–µ–Ω–Ω—ã–π –≤ 1847 –≥–æ–¥—É –ø–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ –≥–µ–Ω–µ—Ä–∞–ª–∞ –ê—Ç–∞–∂—É–∫–∏–Ω–∞. –ü–∞—Ä–∫ —è–≤–ª—è–µ—Ç—Å—è –ø–∞–º—è—Ç–Ω–∏–∫–æ–º —Å–∞–¥–æ–≤–æ-–ø–∞—Ä–∫–æ–≤–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–ª–æ—â–∞–¥—å –æ–∫–æ–ª–æ 250 –≥–µ–∫—Ç–∞—Ä–æ–≤. –ù–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ —Å–∞–¥–∞ –ø—Ä–æ–∏–∑—Ä–∞—Å—Ç–∞—é—Ç —Ä–µ–¥–∫–∏–µ –≤–∏–¥—ã –¥–µ—Ä–µ–≤—å–µ–≤ –∏ –∫—É—Å—Ç–∞—Ä–Ω–∏–∫–æ–≤, –µ—Å—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä—É–¥—ã, —Ñ–æ–Ω—Ç–∞–Ω—ã –∏ —Å–∫—É–ª—å–ø—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏. –≠—Ç–æ –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –∂–∏–≤–æ–ø–∏—Å–Ω—ã—Ö –º–µ—Å—Ç –≥–æ—Ä–æ–¥–∞, –≥–¥–µ –º–æ–∂–Ω–æ –Ω–∞—Å–ª–∞–¥–∏—Ç—å—Å—è –ø—Ä–∏—Ä–æ–¥–æ–π –∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –æ—Ç –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—É–µ—Ç—ã.</p>',
    is_active: true,
    rating: 4.3,
  },
  {
    name: '–°–æ–±–æ—Ä–Ω–∞—è –º–µ—á–µ—Ç—å –ù–∞–ª—å—á–∏–∫–∞',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø—Ä. –õ–µ–Ω–∏–Ω–∞, 56',
    working_hours: '05:00-22:00, –µ–∂–µ–¥–Ω–µ–≤–Ω–æ',
    phone: '+7 (8662) 42-20-20',
    website: null,
    latitude: 43.4856,
    longitude: 43.6089,
    history: '<p>–°–æ–±–æ—Ä–Ω–∞—è –º–µ—á–µ—Ç—å –ù–∞–ª—å—á–∏–∫–∞ ‚Äî –≥–ª–∞–≤–Ω–∞—è –º–µ—á–µ—Ç—å –≥–æ—Ä–æ–¥–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ 2004 –≥–æ–¥—É. –ú–µ—á–µ—Ç—å —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –∏—Å–ª–∞–º—Å–∫–∏—Ö –∫—É–ª—å—Ç–æ–≤—ã—Ö —Å–æ–æ—Ä—É–∂–µ–Ω–∏–π –Ω–∞ –°–µ–≤–µ—Ä–Ω–æ–º –ö–∞–≤–∫–∞–∑–µ. –ó–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π –∫–∞–≤–∫–∞–∑—Å–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ú–µ—á–µ—Ç—å –º–æ–∂–µ—Ç –≤–º–µ—Å—Ç–∏—Ç—å –¥–æ 1000 –≤–µ—Ä—É—é—â–∏—Ö –∏ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω—ã–º –¥—É—Ö–æ–≤–Ω—ã–º —Ü–µ–Ω—Ç—Ä–æ–º –¥–ª—è –º—É—Å—É–ª—å–º–∞–Ω—Å–∫–æ–π –æ–±—â–∏–Ω—ã –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä–∏–∏. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–µ—á–µ—Ç–∏ —Å–æ—á–µ—Ç–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏—Å–ª–∞–º—Å–∫–æ–≥–æ –∑–æ–¥—á–µ—Å—Ç–≤–∞.</p>',
    is_active: true,
    rating: 4.6,
  },
  {
    name: '–ö–∞–±–∞—Ä–¥–∏–Ω—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –¥—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∞—Ç—Ä –∏–º. –ê. –®–æ–≥–µ–Ω—Ü—É–∫–æ–≤–∞',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø—Ä. –õ–µ–Ω–∏–Ω–∞, 1',
    working_hours: '10:00-19:00, –≤—ã—Ö–æ–¥–Ω–æ–π: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
    phone: '+7 (8662) 42-10-10',
    website: 'https://theatre-kbr.ru',
    latitude: 43.4889,
    longitude: 43.6100,
    history: '<p>–ö–∞–±–∞—Ä–¥–∏–Ω—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –¥—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∞—Ç—Ä –∏–º–µ–Ω–∏ –ê–ª–∏ –®–æ–≥–µ–Ω—Ü—É–∫–æ–≤–∞ ‚Äî –æ–¥–∏–Ω –∏–∑ —Å—Ç–∞—Ä–µ–π—à–∏—Ö —Ç–µ–∞—Ç—Ä–æ–≤ –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –≤ 1933 –≥–æ–¥—É. –¢–µ–∞—Ç—Ä –Ω–∞–∑–≤–∞–Ω –≤ —á–µ—Å—Ç—å –≤—ã–¥–∞—é—â–µ–≥–æ—Å—è –∫–∞–±–∞—Ä–¥–∏–Ω—Å–∫–æ–≥–æ –ø–∏—Å–∞—Ç–µ–ª—è –∏ –¥—Ä–∞–º–∞—Ç—É—Ä–≥–∞ –ê–ª–∏ –®–æ–≥–µ–Ω—Ü—É–∫–æ–≤–∞. –í —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä–µ —Ç–µ–∞—Ç—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–±–∞—Ä–¥–∏–Ω—Å–∫–æ–º, –±–∞–ª–∫–∞—Ä—Å–∫–æ–º –∏ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–∞—Ö. –¢–µ–∞—Ç—Ä —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω—ã–º —Ü–µ–Ω—Ç—Ä–æ–º –∫—É–ª—å—Ç—É—Ä–Ω–æ–π –∂–∏–∑–Ω–∏ —Ä–µ—Å–ø—É–±–ª–∏–∫–∏ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç –≥–∞—Å—Ç—Ä–æ–ª–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º –†–æ—Å—Å–∏–∏.</p>',
    is_active: true,
    rating: 4.4,
  },
  {
    name: '–ü–ª–æ—â–∞–¥—å –ê–±—Ö–∞–∑–∏–∏',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø–ª. –ê–±—Ö–∞–∑–∏–∏',
    working_hours: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
    phone: null,
    website: null,
    latitude: 43.4900,
    longitude: 43.6050,
    history: '<p>–ü–ª–æ—â–∞–¥—å –ê–±—Ö–∞–∑–∏–∏ ‚Äî –æ–¥–Ω–∞ –∏–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö –ø–ª–æ—â–∞–¥–µ–π –ù–∞–ª—å—á–∏–∫–∞, –Ω–∞–∑–≤–∞–Ω–Ω–∞—è –≤ —á–µ—Å—Ç—å –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä–∏–µ–π –∏ –ê–±—Ö–∞–∑–∏–µ–π. –ü–ª–æ—â–∞–¥—å —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –º–µ—Å—Ç–æ–º –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –≥–æ—Ä–æ–¥—Å–∫–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π. –ó–¥–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–∞–º—è—Ç–Ω–∏–∫–∏ –∏ —Å–∫—É–ª—å–ø—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏, –µ—Å—Ç—å –∑–µ–ª—ë–Ω—ã–µ –Ω–∞—Å–∞–∂–¥–µ–Ω–∏—è –∏ —Å–∫–∞–º–µ–π–∫–∏ –¥–ª—è –æ—Ç–¥—ã—Ö–∞. –ü–ª–æ—â–∞–¥—å –æ–∫—Ä—É–∂–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –∑–¥–∞–Ω–∏—è–º–∏ –∏ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω—ã–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º —É–∑–ª–æ–º –≥–æ—Ä–æ–¥–∞.</p>',
    is_active: true,
    rating: 4.0,
  },
  {
    name: '–°–∫–≤–µ—Ä –∏–º–µ–Ω–∏ –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, —Å–∫–≤–µ—Ä –∏–º. –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞',
    working_hours: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
    phone: null,
    website: null,
    latitude: 43.4878,
    longitude: 43.6078,
    history: '<p>–°–∫–≤–µ—Ä –∏–º–µ–Ω–∏ –ú–∏—Ö–∞–∏–ª–∞ –Æ—Ä—å–µ–≤–∏—á–∞ –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞ ‚Äî —É—é—Ç–Ω—ã–π –ø–∞—Ä–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –ù–∞–ª—å—á–∏–∫–∞, –Ω–∞–∑–≤–∞–Ω–Ω—ã–π –≤ —á–µ—Å—Ç—å –≤–µ–ª–∏–∫–æ–≥–æ —Ä—É—Å—Å–∫–æ–≥–æ –ø–æ—ç—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—ã–≤–∞–ª –Ω–∞ –ö–∞–≤–∫–∞–∑–µ. –°–∫–≤–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –∏–∑–ª—é–±–ª–µ–Ω–Ω—ã–º –º–µ—Å—Ç–æ–º –æ—Ç–¥—ã—Ö–∞ –≥–æ—Ä–æ–∂–∞–Ω. –ó–¥–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–º—è—Ç–Ω–∏–∫ –õ–µ—Ä–º–æ–Ω—Ç–æ–≤—É, –µ—Å—Ç—å —Ñ–æ–Ω—Ç–∞–Ω—ã, —Ü–≤–µ—Ç–æ—á–Ω—ã–µ –∫–ª—É–º–±—ã –∏ —Ç–µ–Ω–∏—Å—Ç—ã–µ –∞–ª–ª–µ–∏. –°–∫–≤–µ—Ä —Ä–µ–≥—É–ª—è—Ä–Ω–æ –±–ª–∞–≥–æ—É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö —É—Ö–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∫–æ–≤ –≥–æ—Ä–æ–¥–∞.</p>',
    is_active: true,
    rating: 4.2,
  },
  {
    name: '–ü–∞–º—è—Ç–Ω–∏–∫ "–í–µ—á–Ω–∞—è —Å–ª–∞–≤–∞"',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø—Ä. –õ–µ–Ω–∏–Ω–∞',
    working_hours: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
    phone: null,
    website: null,
    latitude: 43.4883,
    longitude: 43.6094,
    history: '<p>–ü–∞–º—è—Ç–Ω–∏–∫ "–í–µ—á–Ω–∞—è —Å–ª–∞–≤–∞" ‚Äî –º–µ–º–æ—Ä–∏–∞–ª—å–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å, –ø–æ—Å–≤—è—â—ë–Ω–Ω—ã–π –≤–æ–∏–Ω–∞–º, –ø–æ–≥–∏–±—à–∏–º –≤ –≥–æ–¥—ã –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã. –ü–∞–º—è—Ç–Ω–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Ü–µ–Ω—Ç—Ä–µ –ù–∞–ª—å—á–∏–∫–∞ –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –º–µ–º–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≥–æ—Ä–æ–¥–∞. –£ –ø–æ–¥–Ω–æ–∂–∏—è –ø–∞–º—è—Ç–Ω–∏–∫–∞ –≥–æ—Ä–∏—Ç –í–µ—á–Ω—ã–π –æ–≥–æ–Ω—å, –∞ –≤–æ–∫—Ä—É–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–ª–∏—Ç—ã —Å –∏–º–µ–Ω–∞–º–∏ –ø–æ–≥–∏–±—à–∏—Ö –≥–µ—Ä–æ–µ–≤. –ú–µ–º–æ—Ä–∏–∞–ª —è–≤–ª—è–µ—Ç—Å—è –º–µ—Å—Ç–æ–º –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ –¥–Ω–∏ –≤–æ–∏–Ω—Å–∫–æ–π —Å–ª–∞–≤—ã.</p>',
    is_active: true,
    rating: 4.7,
  },
  {
    name: '–ú—É–∑–µ–π –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–∫—É—Å—Å—Ç–≤ –ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–æ–π –†–µ—Å–ø—É–±–ª–∏–∫–∏',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø—Ä. –õ–µ–Ω–∏–Ω–∞, 35',
    working_hours: '10:00-18:00, –≤—ã—Ö–æ–¥–Ω–æ–π: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
    phone: '+7 (8662) 42-11-11',
    website: 'https://museum-art-kbr.ru',
    latitude: 43.4872,
    longitude: 43.6083,
    history: '<p>–ú—É–∑–µ–π –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–∫—É—Å—Å—Ç–≤ –ö–ë–† ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º—É–∑–µ–π —Ä–µ—Å–ø—É–±–ª–∏–∫–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –≤ 1960 –≥–æ–¥—É. –í –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –º—É–∑–µ—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∂–∏–≤–æ–ø–∏—Å–∏, –≥—Ä–∞—Ñ–∏–∫–∏, —Å–∫—É–ª—å–ø—Ç—É—Ä—ã –∏ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞. –û—Å–æ–±–æ–µ –º–µ—Å—Ç–æ –∑–∞–Ω–∏–º–∞—é—Ç —Ä–∞–±–æ—Ç—ã –∫–∞–±–∞—Ä–¥–∏–Ω—Å–∫–∏—Ö –∏ –±–∞–ª–∫–∞—Ä—Å–∫–∏—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ä—É—Å—Å–∫–∏—Ö –∏ –∑–∞—Ä—É–±–µ–∂–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤. –ú—É–∑–µ–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç –≤—ã—Å—Ç–∞–≤–∫–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.</p>',
    is_active: true,
    rating: 4.5,
  },
  {
    name: '–ü–∞–º—è—Ç–Ω–∏–∫ –õ–µ–Ω–∏–Ω—É',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, –ø–ª. –õ–µ–Ω–∏–Ω–∞',
    working_hours: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ',
    phone: null,
    website: null,
    latitude: 43.4889,
    longitude: 43.6100,
    history: '<p>–ü–∞–º—è—Ç–Ω–∏–∫ –í–ª–∞–¥–∏–º–∏—Ä—É –ò–ª—å–∏—á—É –õ–µ–Ω–∏–Ω—É ‚Äî –æ–¥–∏–Ω –∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤ –ù–∞–ª—å—á–∏–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≤ —Å–æ–≤–µ—Ç—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥. –ü–∞–º—è—Ç–Ω–∏–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ø–ª–æ—â–∞–¥–∏ –≥–æ—Ä–æ–¥–∞ –∏ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω—Å–∞–º–±–ª—è. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä–∞–Ω–µ, –ø–∞–º—è—Ç–Ω–∏–∫ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç –∏ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–∏—è –≥–æ—Ä–æ–¥–∞.</p>',
    is_active: true,
    rating: 3.8,
  },
  {
    name: '–ì–æ—Ä–æ–¥—Å–∫–æ–π –ø–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã –∏ –æ—Ç–¥—ã—Ö–∞',
    address: '–≥. –ù–∞–ª—å—á–∏–∫, —É–ª. –ö–∞–±–∞—Ä–¥–∏–Ω—Å–∫–∞—è',
    working_hours: '08:00-22:00, –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    phone: '+7 (8662) 42-30-30',
    website: null,
    latitude: 43.4833,
    longitude: 43.6017,
    history: '<p>–ì–æ—Ä–æ–¥—Å–∫–æ–π –ø–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã –∏ –æ—Ç–¥—ã—Ö–∞ ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Å–µ–º–µ–π–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ –≤ –ù–∞–ª—å—á–∏–∫–µ. –ü–∞—Ä–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω –¥–µ—Ç—Å–∫–∏–º–∏ –ø–ª–æ—â–∞–¥–∫–∞–º–∏, –∞—Ç—Ç—Ä–∞–∫—Ü–∏–æ–Ω–∞–º–∏, –∫–∞—Ñ–µ –∏ –∑–æ–Ω–∞–º–∏ –¥–ª—è –ø–∏–∫–Ω–∏–∫–æ–≤. –ó–¥–µ—Å—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –∫–æ–Ω—Ü–µ—Ä—Ç—ã –∏ —Ñ–µ—Å—Ç–∏–≤–∞–ª–∏. –ü–∞—Ä–∫ —è–≤–ª—è–µ—Ç—Å—è –∏–∑–ª—é–±–ª–µ–Ω–Ω—ã–º –º–µ—Å—Ç–æ–º –æ—Ç–¥—ã—Ö–∞ –∂–∏—Ç–µ–ª–µ–π –∏ –≥–æ—Å—Ç–µ–π –≥–æ—Ä–æ–¥–∞ –≤—Å–µ—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤.</p>',
    is_active: true,
    rating: 4.1,
  },
];

/**
 * –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ Strapi API
 */
async function createPlace(placeData) {
  try {
    // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ Strapi
    const data = {
      name: placeData.name,
      address: placeData.address,
      working_hours: placeData.working_hours,
      phone: placeData.phone || null,
      website: placeData.website || null,
      latitude: placeData.latitude,
      longitude: placeData.longitude,
      history: placeData.history,
      is_active: placeData.is_active !== undefined ? placeData.is_active : true,
      rating: placeData.rating || 3.5,
    };

    const response = await axios.post(`${API_URL}/places`, {
      data: data,
    }, {
      headers: {
        'Content-Type': 'application/json',
      },
    });

    if (response.data && response.data.data) {
      // –ü—É–±–ª–∏–∫—É–µ–º –º–µ—Å—Ç–æ
      const placeId = response.data.data.id;
      await axios.put(
        `${API_URL}/places/${placeId}`,
        {
          data: {
            ...data,
            publishedAt: new Date().toISOString(),
          },
        },
        {
          headers: {
            'Content-Type': 'application/json',
          },
        }
      );
      
      return { success: true, id: placeId, name: placeData.name };
    }
    
    return { success: false, error: '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç API' };
  } catch (error) {
    return {
      success: false,
      error: error.response?.data?.error?.message || error.message,
      status: error.response?.status,
      details: error.response?.data,
    };
  }
}

/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Strapi
 */
async function checkStrapiConnection() {
  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –∏–ª–∏ API
    const response = await axios.get(`${STRAPI_URL}/admin`, { timeout: 5000 });
    return response.status === 200;
  } catch (error) {
    // –ï—Å–ª–∏ –∞–¥–º–∏–Ω–∫–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞, –ø—Ä–æ–±—É–µ–º API
    try {
      const apiResponse = await axios.get(`${API_URL}/places`, { timeout: 5000 });
      return true; // –î–∞–∂–µ –µ—Å–ª–∏ 404, –∑–Ω–∞—á–∏—Ç Strapi —Ä–∞–±–æ—Ç–∞–µ—Ç
    } catch (apiError) {
      return false;
    }
  }
}

/**
 * –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
 */
async function main() {
  console.log(`${colors.blue}üöÄ –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –ù–∞–ª—å—á–∏–∫–∞...${colors.reset}\n`);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Strapi
  console.log(`${colors.yellow}–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Strapi...${colors.reset}`);
  const isConnected = await checkStrapiConnection();
  
  if (!isConnected) {
    console.log(`${colors.red}‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Strapi –ø–æ –∞–¥—Ä–µ—Å—É ${STRAPI_URL}${colors.reset}`);
    console.log(`${colors.yellow}–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Strapi –∑–∞–ø—É—â–µ–Ω: npm run develop${colors.reset}\n`);
    process.exit(1);
  }
  
  console.log(`${colors.green}‚úÖ Strapi –¥–æ—Å—Ç—É–ø–µ–Ω${colors.reset}\n`);

  // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Å—Ç–∞
  console.log(`${colors.blue}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –ù–∞–ª—å—á–∏–∫–∞...${colors.reset}\n`);
  
  let successCount = 0;
  let failCount = 0;
  
  for (const place of places) {
    console.log(`${colors.yellow}–î–æ–±–∞–≤–ª—è—é: ${place.name}...${colors.reset}`);
    
    const result = await createPlace(place);
    
    if (result.success) {
      console.log(`${colors.green}‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: ${place.name} (ID: ${result.id})${colors.reset}\n`);
      successCount++;
    } else {
      console.log(`${colors.red}‚ùå –û—à–∏–±–∫–∞: ${place.name}${colors.reset}`);
      if (result.status === 401 || result.status === 403) {
        console.log(`${colors.yellow}   –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:${colors.reset}`);
        console.log(`${colors.yellow}   –ó–∞–ø—É—Å—Ç–∏—Ç–µ: node scripts/setup-permissions.js${colors.reset}`);
        console.log(`${colors.yellow}   –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ –∞–¥–º–∏–Ω–∫–µ:${colors.reset}`);
        console.log(`${colors.yellow}   Settings ‚Üí Users & Permissions ‚Üí Roles ‚Üí Public ‚Üí Place ‚Üí find/create${colors.reset}`);
      } else if (result.status === 405) {
        console.log(`${colors.yellow}   –ú–µ—Ç–æ–¥ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:${colors.reset}`);
        console.log(`${colors.yellow}   Settings ‚Üí Users & Permissions ‚Üí Roles ‚Üí Public ‚Üí Place ‚Üí create${colors.reset}`);
        console.log(`${colors.yellow}   –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Strapi${colors.reset}`);
      } else {
        console.log(`${colors.red}   ${result.error} (—Å—Ç–∞—Ç—É—Å: ${result.status || 'N/A'})${colors.reset}`);
        if (result.details) {
          console.log(`${colors.red}   –î–µ—Ç–∞–ª–∏: ${JSON.stringify(result.details, null, 2)}${colors.reset}`);
        }
        console.log('');
      }
      failCount++;
    }
    
    // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
    await new Promise(resolve => setTimeout(resolve, 500));
  }

  // –ò—Ç–æ–≥–∏
  console.log(`\n${colors.blue}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${colors.reset}`);
  console.log(`${colors.green}‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: ${successCount}${colors.reset}`);
  if (failCount > 0) {
    console.log(`${colors.red}‚ùå –û—à–∏–±–æ–∫: ${failCount}${colors.reset}`);
  }
  console.log(`${colors.blue}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${colors.reset}\n`);

  if (successCount > 0) {
    console.log(`${colors.green}üéâ –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ù–∞–ª—å—á–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!${colors.reset}`);
    console.log(`${colors.blue}–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏: ${STRAPI_URL}/admin${colors.reset}\n`);
  }
}

// –ó–∞–ø—É—Å–∫
main().catch(error => {
  console.error(`${colors.red}–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:${colors.reset}`, error);
  process.exit(1);
});

